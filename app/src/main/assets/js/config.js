// [ZOMBIE CODE] Old RPCs
// const RPC_URL = "https://polygon-rpc.com";
// const OLD_BSC = "https://bsc-dataseed.binance.org/";
// const OLD_ETH = "https://cloudflare-eth.com";

var BASE_URL = 'https://flowork.cloud';

var NETWORKS = {
    polygon: {
        name: "Polygon", rpc: "https://polygon-rpc.com", symbol: "POL",
        tokens: [
            { name: "Tether USD", symbol: "USDT", address: "0xc2132D05D31c914a87C6611C10748AEb04B58e8F" },
            { name: "USD Coin", symbol: "USDC", address: "0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359" }
        ]
    },
    bsc: {
        name: "BNB Smart Chain", rpc: "https://bsc-rpc.publicnode.com", symbol: "BNB",
        tokens: [
            { name: "Tether USD", symbol: "USDT", address: "0x55d398326f99059fF775485246999027B3197955" },
            { name: "USD Coin", symbol: "USDC", address: "0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d" }
        ]
    },
    ethereum: {
        name: "Ethereum", rpc: "https://eth.drpc.org", symbol: "ETH",
        tokens: [
            { name: "Tether USD", symbol: "USDT", address: "0xdAC17F958D2ee523a2206206994597C13D831ec7" },
            { name: "USD Coin", symbol: "USDC", address: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48" }
        ]
    },
    arbitrum: {
        name: "Arbitrum One", rpc: "https://arb1.arbitrum.io/rpc", symbol: "ETH",
        tokens: [
            { name: "Tether USD", symbol: "USDT", address: "0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9" },
            { name: "USD Coin", symbol: "USDC", address: "0xaf88d065e77c8cC2239327C5EDb3A432268e5831" }
        ]
    }
};

var ERC20_ABI = [
    "function balanceOf(address owner) view returns (uint256)",
    "function decimals() view returns (uint8)",
    "function symbol() view returns (string)",
    "function transfer(address to, uint256 amount) returns (bool)"
];

var i18n = {
    en: {
        search_placeholder: "Search apps...",
        search_fav_placeholder: "Search favorites...",
        login_title: "Flowork Engine Auth",
        login_desc: "This system requires a secret key authentication.",
        login_slogan: "Create limitless creativity with Flowork OS", // Added
        login_placeholder: "Paste Private Key or Mnemonic...",
        login_btn: "LOGIN",
        reg_btn_main: "SIGNUP",
        login_link: "Don't have a key? Create Secure Identity",
        reg_title: "Create Secure Identity",
        reg_desc: "Generate a new decentralized workspace key. No database required.",
        reg_btn_gen: "Generate New Key",
        reg_warn: "⚠️ COPY & SAVE THIS OFFLINE. NO RECOVERY POSSIBLE!",
        reg_btn_copy: "Copy Secret Code",
        reg_btn_save: "I Have Saved It - Create PIN",
        reg_link: "Already have a key? Login",

        pin_setup_title: "Create 6-Digit PIN",
        pin_setup_desc: "Secure your wallet. This PIN cannot be recovered!",
        pin_unlock_title: "Unlock Wallet",
        pin_unlock_desc: "Enter your 6-digit PIN to access your wallet.",
        btn_save_pin: "Encrypt & Save",
        btn_unlock: "Unlock",
        btn_reset_wallet: "Forgot PIN? Reset Wallet",
        progress_encrypting: "Encrypting Vault...",
        progress_decrypting: "Decrypting Vault...",
        toast_pin_length: "PIN must be exactly 6 digits!",
        toast_wrong_pin: "Incorrect PIN!",
        toast_encrypting: "Securing wallet (takes a few seconds)...",
        toast_decrypting: "Unlocking wallet...",

        toast_copy_success: "Code successfully copied!",
        toast_copy_fail: "Failed to copy. Please copy manually.",
        toast_empty: "Input cannot be empty",
        toast_init: "System Initializing, wait 2 sec...",
        toast_gen: "Generating Secure Key...",
        toast_created: "Identity Securely Created!",
        toast_validating: "Validating Cryptography...",
        toast_login_success: "Login Success!",
        toast_invalid: "Invalid Format / Mnemonic Error!",
        toast_syncing: "Syncing to Cloud Database...",
        toast_synced: "API Key Saved & Synced to Cloud!",
        toast_deleted: "API Key Deleted from Cloud!",
        toast_refreshing: "Fetching fresh data...",

        profile_title: "Profile Settings",
        profile_name_label: "Display Name",
        profile_avatar_label: "Avatar (Image File)",
        profile_btn_upload: "Upload Image",
        profile_key_label: "Private Key (Login Code)",
        btn_show_key: "Show Private Key",
        profile_btn_save: "Save Profile",
        toast_profile_saved: "Profile updated!",
        toast_key_copied: "Private Key copied!",
        toast_file_too_large: "File too large! Max 2MB allowed.",
        toast_compressing: "Compressing Image...",

        // [BARU] Clear Cache Menu
        btn_clear_cache: "Clear System Cache",
        confirm_clear_cache: "Are you sure? This will delete all offline app data and reload the system.",
        toast_cache_cleared: "System Cache Cleared!",

        wallet_title: "Wallet",
        wallet_balance: "Total Balance",
        wallet_tokens: "Assets / Tokens",
        wallet_your_address: "Your Wallet Address",
        wallet_send: "Send Asset",
        wallet_address_placeholder: "Recipient Address (0x...)",
        wallet_amount_placeholder: "Amount (e.g. 0.01)",
        wallet_btn_send: "Send Now",
        toast_address_copied: "Public Address Copied!",
        toast_invalid_address: "Invalid Recipient Address!",
        toast_tx_processing: "Processing Transaction...",
        toast_tx_wait: "Tx Sent! Waiting for confirmation...",
        toast_tx_success: "Transaction Successful!",
        toast_tx_failed: "Transaction Failed / Insufficient Funds!",

        menu_api_keys: "Manage API Keys",
        menu_theme: "Toggle Theme",
        menu_exit: "Exit Device",
        no_favorites: "No favorites yet.",
        cat_all: "All",
        cat_latest: "Latest",
        cat_favorites: "Favorites",
        cat_games: "Games",
        cat_tools: "Tools",
        cat_productivity: "Productivity",
        cat_finance: "Finance",
        cat_social: "Social",

        ai_rename_title: "Rename Session",
        ai_new_title: "New title...",
        ai_cancel: "CANCEL",
        ai_save: "SAVE",
        ai_del_title: "Delete Session?",
        ai_del_desc: "This action cannot be undone.",
        ai_delete: "DELETE",
        ai_archives: "ARCHIVES",
        ai_new: "NEW",
        ai_replay: "REPLAY",
        ai_pdf: "PDF",
        ai_text_size: "Text Size",
        ai_war_room: "WAR ROOM",
        ai_ready: "AI COUNCIL READY",
        ai_connecting: "CONNECTING TO NEURAL NET...",
        ai_placeholder: "Command the Council...",
        ai_placeholder_replay: "System Replaying Session...",
        ai_shift_enter: "SHIFT+ENTER = NEW LINE",
        ai_config: "COUNCIL CONFIG",
        ai_moderator: "Moderator (Judge)",
        ai_mod_desc: "Moderator's API Key will be used as an access ticket.",
        ai_save_config: "SAVE CONFIG",
        ai_toast_copied: "Text Copied!",
        ai_toast_pdf: "Generating Proposal...",
        ai_toast_empty: "Chat is empty!",
        ai_toast_deleted: "Deleted",
        ai_toast_renamed: "Renamed",
        ai_toast_config: "Protocols Updated",
        ai_toast_need_agent: "Enable at least 1 Agent!",
        ai_toast_replaying: "Replaying Session...",
        ai_toast_replay_done: "Replay Finished",
        ai_stop: "STOPPED",
        ai_error: "ERROR",
        menu_my_engines: "My Engines",
        engine_page_title: "My Engines",
        engine_btn_add: "Deploy Node",
        engine_syncing: "SYNCING WITH CLUSTER...",
        engine_btn_submit_form: "Submit Form",
        engine_success_title: "Deployment Success!",
        engine_success_desc: "⚠️ Save these credentials to your engine's .env file. The token will not be shown again.",
        ai_no_api_keys: "⚠️ **API Keys Missing!**\nYou must configure at least one API Key (`OPENAI_API_KEY`, `GEMINI_API_KEY`, or `DEEPSEEK_API_KEY`) in the **Manage API Keys** menu to use the AI Council.",
        ai_prompt_logic: "You are ChatGPT Critic. Your task is to FIND FLAWS and ERRORS in your friends' arguments.\nDo not agree easily, debate thoroughly.\nUse casual conversational language.\nBe concise, clear, and straight to the point, max 300 words.\nSTRICTLY NO HTML Entities like &quot; or &amp;. Use standard quotes (\").\nDo not drift from the topic, focus on the question and find solutions.\nFIND OUT OF THE BOX IDEAS, DO NOT USE ORDINARY IDEAS.",
        ai_prompt_creative: "You are Gemini Analyst.\nMain task: Accurately analyze factual data.\nSpecial Power: You have access to the 'Neural Vault' (Long-term Memory) of FloworkOS.\nDo not assume, use sharp logic.\nUse casual conversational language.\nBe concise, clear, and straight to the point, max 100 words.\nSTRICTLY NO HTML Entities like &quot; or &amp;. Use standard quotes (\").\nFIND OUT OF THE BOX IDEAS.\nIf there is data from knowledge_search, prioritize it as the main fact.",
        ai_prompt_tactical: "You are DeepSeek Strategist.\nDo not assume, use sharp logic.\nUse casual conversational language.\nBe concise, clear, and straight to the point, max 100 words.\nSTRICTLY NO HTML Entities like &quot; or &amp;. Use standard quotes (\").\nFIND OUT OF THE BOX IDEAS."
    },
    id: {
        search_placeholder: "Cari aplikasi...",
        search_fav_placeholder: "Cari favorit...",
        login_title: "Otentikasi Flowork",
        login_desc: "Sistem ini membutuhkan otentikasi kunci rahasia.",
        login_slogan: "Buat kreatifitas tanpa batas dengan Flowork OS", // Added
        login_placeholder: "Tempel Private Key atau Mnemonic...",
        login_btn: "MASUK",
        reg_btn_main: "DAFTAR",
        login_link: "Belum punya kunci? Buat Identitas Aman",
        reg_title: "Buat Identitas Aman",
        reg_desc: "Hasilkan kunci ruang kerja terdesentralisasi baru. Tanpa database.",
        reg_btn_gen: "Hasilkan Kunci Baru",
        reg_warn: "⚠️ SALIN & SIMPAN SECARA LURING. TIDAK BISA DIPULIHKAN!",
        reg_btn_copy: "Salin Kode Rahasia",
        reg_btn_save: "Saya Sudah Menyimpannya - Buat PIN",
        reg_link: "Sudah punya kunci? Masuk",

        pin_setup_title: "Buat PIN 6-Digit",
        pin_setup_desc: "Amankan dompet Anda. PIN ini tidak bisa dipulihkan!",
        pin_unlock_title: "Buka Brankas",
        pin_unlock_desc: "Masukkan PIN 6-digit untuk mengakses dompet Anda.",
        btn_save_pin: "Enkripsi & Simpan",
        btn_unlock: "Buka Kunci",
        btn_reset_wallet: "Lupa PIN? Hapus Dompet",
        progress_encrypting: "Mengenkripsi Brankas...",
        progress_decrypting: "Membuka Brankas...",
        toast_pin_length: "PIN harus pas 6 digit!",
        toast_wrong_pin: "PIN Salah!",
        toast_encrypting: "Mengamankan dompet (butuh beberapa detik)...",
        toast_decrypting: "Membuka kunci dompet...",

        toast_copy_success: "Kode sudah berhasil disalin!",
        toast_copy_fail: "Gagal menyalin. Silakan salin manual.",
        toast_empty: "Input tidak boleh kosong",
        toast_init: "Sistem Memulai, tunggu 2 detik...",
        toast_gen: "Menghasilkan Kunci Aman...",
        toast_created: "Identitas Berhasil Dibuat!",
        toast_validating: "Memvalidasi Kriptografi...",
        toast_login_success: "Berhasil Masuk!",
        toast_invalid: "Format Tidak Valid / Kesalahan Mnemonic!",
        toast_syncing: "Menyinkronkan ke Database Cloud...",
        toast_synced: "API Key Tersimpan & Sinkron ke Cloud!",
        toast_deleted: "API Key Dihapus dari Cloud!",
        toast_refreshing: "Memuat data terbaru...",

        profile_title: "Pengaturan Profil",
        profile_name_label: "Nama Tampilan",
        profile_avatar_label: "Avatar (File Gambar)",
        profile_btn_upload: "Unggah Gambar",
        profile_key_label: "Private Key (Kode Masuk)",
        btn_show_key: "Tampilkan Private Key",
        profile_btn_save: "Simpan Profil",
        toast_profile_saved: "Profil berhasil diperbarui!",
        toast_key_copied: "Private Key berhasil disalin!",
        toast_file_too_large: "File terlalu besar! Maksimal 2MB.",
        toast_compressing: "Mengompresi Gambar...",

        // [BARU] Clear Cache Menu
        btn_clear_cache: "Hapus Cache Sistem",
        confirm_clear_cache: "Yakin? Ini akan menghapus semua data offline aplikasi dan memuat ulang sistem.",
        toast_cache_cleared: "Cache Sistem Dihapus!",

        wallet_title: "Dompet Kripto",
        wallet_balance: "Total Saldo",
        wallet_tokens: "Aset / Token",
        wallet_your_address: "Alamat Dompet Anda",
        wallet_send: "Kirim Aset",
        wallet_address_placeholder: "Alamat Penerima (0x...)",
        wallet_amount_placeholder: "Jumlah (Cth: 0.01)",
        wallet_btn_send: "Kirim Sekarang",
        toast_address_copied: "Alamat Publik Disalin!",
        toast_invalid_address: "Alamat Penerima Tidak Valid!",
        toast_tx_processing: "Memproses Transaksi...",
        toast_tx_wait: "Terkirim! Menunggu konfirmasi jaringan...",
        toast_tx_success: "Transaksi Berhasil!",
        toast_tx_failed: "Transaksi Gagal / Saldo Tidak Cukup!",

        menu_api_keys: "Kelola API Key",
        menu_theme: "Ubah Tema",
        menu_exit: "Keluar Perangkat",
        no_favorites: "Belum ada favorit.",
        cat_all: "Semua",
        cat_latest: "Terbaru",
        cat_favorites: "Favorit",
        cat_games: "Permainan",
        cat_tools: "Alat",
        cat_productivity: "Produktivitas",
        cat_finance: "Keuangan",
        cat_social: "Sosial",

        ai_rename_title: "Ubah Nama Sesi",
        ai_new_title: "Judul baru...",
        ai_cancel: "BATAL",
        ai_save: "SIMPAN",
        ai_del_title: "Hapus Sesi?",
        ai_del_desc: "Tindakan ini tidak dapat dibatalkan.",
        ai_delete: "HAPUS",
        ai_archives: "ARSIP",
        ai_new: "BARU",
        ai_replay: "ULANG",
        ai_pdf: "PDF",
        ai_text_size: "Ukuran Teks",
        ai_war_room: "RUANG KOMANDO",
        ai_ready: "DEWAN AI SIAP",
        ai_connecting: "MENGHUBUNGKAN KE JARINGAN NEURAL...",
        ai_placeholder: "Perintahkan Dewan Jenderal...",
        ai_placeholder_replay: "Sistem Mengulang Sesi...",
        ai_shift_enter: "SHIFT+ENTER = BARIS BARU",
        ai_config: "KONFIGURASI DEWAN",
        ai_moderator: "Moderator (Hakim)",
        ai_mod_desc: "API Key moderator akan digunakan sebagai tiket masuk.",
        ai_save_config: "SIMPAN KONFIGURASI",
        ai_toast_copied: "Teks Disalin!",
        ai_toast_pdf: "Membuat Proposal...",
        ai_toast_empty: "Chat kosong!",
        ai_toast_deleted: "Dihapus",
        ai_toast_renamed: "Diubah",
        ai_toast_config: "Protokol Diperbarui",
        ai_toast_need_agent: "Aktifkan minimal 1 Agent!",
        ai_toast_replaying: "Mengulang Sesi...",
        ai_toast_replay_done: "Selesai Mengulang",
        ai_stop: "DIHENTIKAN",
        ai_error: "KESALAHAN",
        menu_my_engines: "Engine Saya",
        engine_page_title: "Engine Saya",
        engine_btn_add: "Deploy Node",
        engine_syncing: "SINKRONISASI CLUSTER...",
        engine_btn_submit_form: "Kirim Form",
        engine_success_title: "Deploy Berhasil!",
        engine_success_desc: "⚠️ Simpan kredensial ini ke file .env engine Anda. Token tidak akan ditampilkan lagi.",
        ai_no_api_keys: "⚠️ **API Key Kosong!**\nKamu harus mengisi minimal satu API Key (`OPENAI_API_KEY`, `GEMINI_API_KEY`, atau `DEEPSEEK_API_KEY`) di menu **Kelola API Key** sebelum bisa menggunakan Dewan AI.",
        ai_prompt_logic: "Kamu adalah ChatGPT Critic. Tugasmu MENCARI CELAH dan KESALAHAN argumen temanmu.\nJangan setuju begitu saja, debat sampai tuntas.\nGunakan Bahasa Indonesia Gaul (Loe/Gue).\nGunakan bahasa yang singkat, padat, jelas langsung ke inti maximal 300 kata.\nDILARANG KERAS menggunakan HTML Entities seperti &quot; atau &amp;. Gunakan tanda petik (\") biasa.\nDilarang keluar dari topik, fokus ke pertanyaan dan cari solusi.\nCARI IDE OUT OF THE BOX , JANGAN GUNAKAN IDE YANG BIASA BIASA SAJA.",
        ai_prompt_creative: "Kamu adalah Gemini Analyst.\nTugas utama: Analisa data fakta secara akurat.\nKekuatan Spesial: Kamu punya akses ke 'Neural Vault' (Long-term Memory) FloworkOS.\nJangan berasumsi, gunakan logic yang tajam.\nGunakan Bahasa Indonesia Gaul (Loe/Gue).\nGunakan bahasa yang singkat, padat, jelas langsung ke inti maximal 100 kata.\nDILARANG KERAS menggunakan HTML Entities seperti &quot; atau &amp;. Gunakan tanda petik (\") biasa.\nCARI IDE OUT OF THE BOX.\nJika ada data dari knowledge_search, prioritaskan data tersebut sebagai fakta utama.",
        ai_prompt_tactical: "Kamu adalah DeepSeek Strategist.\nJangan berasumsi, gunakan logic yang tajam.\nGunakan Bahasa Indonesia Gaul (Loe/Gue).\nGunakan bahasa yang singkat, padat, jelas langsung ke inti maximal 100 kata.\nDILARANG KERAS menggunakan HTML Entities seperti &quot; atau &amp;. Gunakan tanda petik (\") biasa.\nCARI IDE OUT OF THE BOX."
    }
};